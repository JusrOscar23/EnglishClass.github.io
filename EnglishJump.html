<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>English Jump: Plataformas Educativas</title>
  <style>
    :root {
      --primary-color: #4361ee;
      --secondary-color: #3a0ca3;
      --accent-color: #f72585;
      --light-color: #ffffff;
      --text-color: #2b2d42;
      --fun-color: #4cc9f0;
      --platform-color: #3a0ca3;
      --block-color: #f5cb5c;
      --block-border: #d8a91a;
      --danger-color: #ef233c;
      --success-color: #4ade80;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: var(--text-color);
      background-color: #f8f9fa;
      overflow-x: hidden;
      touch-action: manipulation;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    header {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: var(--light-color);
      padding: 0.8rem 0;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 100;
      flex-shrink: 0;
    }
    
    .header-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .logo-container {
      display: flex;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    
    .logo-container img {
      height: 50px;
      margin-right: 12px;
      filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.2));
    }
    
    .logo-container h1 {
      font-size: 1.8rem;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
      font-weight: 700;
    }
    
    nav ul {
      display: flex;
      list-style: none;
      flex-wrap: wrap;
      justify-content: center;
      gap: 8px;
    }
    
    nav li {
      margin: 0 3px;
    }
    
    nav a {
      color: var(--light-color);
      text-decoration: none;
      font-weight: 600;
      padding: 6px 12px;
      border-radius: 30px;
      transition: all 0.3s ease;
      background-color: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(5px);
      font-size: 0.9rem;
    }
    
    nav a:hover, nav a:focus {
      background-color: var(--accent-color);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(247, 37, 133, 0.4);
      outline: none;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1.5rem 20px;
      text-align: center;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }
    
    .game-wrapper {
      position: relative;
      width: 100%;
      overflow: hidden;
      margin: 1rem auto;
      flex-grow: 1;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      background: linear-gradient(135deg, #e0f7fa, #b2ebf2);
    }
    
    .game-container {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    
    .game-world {
      position: absolute;
      width: 4000px;
      height: 600px;
      background: linear-gradient(to bottom, #4cc9f0, #4361ee);
      background-size: 100% 100%;
      transition: transform 0.2s ease-out;
    }
    
    .player {
      position: absolute;
      width: 50px;
      height: 70px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%234361ee"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/></svg>');
      background-size: 60%;
      background-repeat: no-repeat;
      background-position: center 15px;
      background-color: var(--light-color);
      border-radius: 50% 50% 0 0;
      z-index: 20;
      transition: transform 0.1s;
      bottom: 100px;
      left: 100px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      border: 3px solid var(--primary-color);
    }
    
    .player.jumping {
      animation: playerJump 0.5s ease;
    }
    
    @keyframes playerJump {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-30px); }
    }
    
    .platform {
      position: absolute;
      background-color: var(--platform-color);
      border-radius: 10px;
      box-shadow: inset 0 -5px 0 rgba(0,0,0,0.2);
      z-index: 10;
    }
    
    .platform.grass {
      background: linear-gradient(to bottom, #2ecc71, #27ae60);
      box-shadow: inset 0 -5px 0 rgba(0,0,0,0.2), 0 5px 15px rgba(46, 204, 113, 0.3);
    }
    
    .platform.ice {
      background: linear-gradient(to bottom, #74b9ff, #0984e3);
      box-shadow: inset 0 -5px 0 rgba(0,0,0,0.2), 0 5px 15px rgba(116, 185, 255, 0.3);
    }
    
    .block {
      position: absolute;
      width: 50px;
      height: 50px;
      background-color: var(--block-color);
      border: 3px solid var(--block-border);
      border-radius: 5px;
      box-shadow: inset 0 -5px 0 rgba(0,0,0,0.2);
      z-index: 15;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .block.hit {
      animation: blockHit 0.3s;
    }
    
    .block.question {
      background-color: #f5cb5c;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23d8a91a"><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/></svg>');
      background-size: 60%;
      background-repeat: no-repeat;
      background-position: center;
    }
    
    @keyframes blockHit {
      0% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0); }
    }
    
    .word-bubble {
      position: absolute;
      background-color: white;
      padding: 8px 15px;
      border-radius: 20px;
      font-weight: bold;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
      cursor: pointer;
      z-index: 25;
      transition: all 0.3s;
      display: none;
      min-width: 80px;
      text-align: center;
      font-size: 0.9rem;
    }
    
    .word-bubble.show {
      display: block;
      animation: bubbleAppear 0.5s;
    }
    
    .word-bubble.english {
      border: 2px solid var(--primary-color);
    }
    
    .word-bubble.spanish {
      border: 2px solid var(--accent-color);
    }
    
    @keyframes bubbleAppear {
      0% { transform: translateY(20px) scale(0.8); opacity: 0; }
      100% { transform: translateY(0) scale(1); opacity: 1; }
    }
    
    .word-bubble:hover, .word-bubble:focus {
      transform: scale(1.1);
      background-color: var(--accent-color);
      color: white;
      outline: none;
    }
    
    .matched {
      background-color: var(--success-color) !important;
      color: white !important;
      transform: scale(1.1);
      box-shadow: 0 5px 15px rgba(74, 222, 128, 0.4);
    }
    
    .enemy {
      position: absolute;
      width: 40px;
      height: 40px;
      background-color: var(--danger-color);
      border-radius: 50%;
      z-index: 15;
      animation: enemyFloat 3s infinite ease-in-out;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
    }
    
    @keyframes enemyFloat {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }
    
    .game-controls {
      margin: 1rem 0;
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }
    
    .control-btn {
      background-color: var(--accent-color);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 30px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 0.9rem;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .control-btn:hover, .control-btn:focus {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(247, 37, 133, 0.4);
      outline: none;
    }
    
    .control-btn.secondary {
      background-color: var(--primary-color);
    }
    
    .score-display {
      font-size: 1.2rem;
      margin: 0.5rem 0;
      color: var(--secondary-color);
      font-weight: bold;
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
    }
    
    .score-item {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .score-icon {
      font-size: 1.3rem;
    }
    
    .instructions {
      background-color: white;
      padding: 1.2rem;
      border-radius: 15px;
      margin: 0.5rem auto;
      max-width: 800px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      text-align: left;
    }
    
    .instructions h3 {
      color: var(--primary-color);
      margin-bottom: 0.5rem;
      font-size: 1.1rem;
    }
    
    .instructions p {
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
    }
    
    .mobile-controls {
      display: none;
      justify-content: space-between;
      padding: 10px;
      margin-top: 5px;
      background-color: rgba(255,255,255,0.8);
      border-radius: 50px;
      position: relative;
      z-index: 30;
    }
    
    .mobile-btn {
      background-color: rgba(67, 97, 238, 0.8);
      color: white;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      user-select: none;
      touch-action: manipulation;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      transition: all 0.2s;
      position: relative;
      overflow: hidden;
    }
    
    .mobile-btn::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 5px;
      height: 5px;
      background: rgba(255, 255, 255, 0.5);
      opacity: 0;
      border-radius: 100%;
      transform: scale(1, 1) translate(-50%, -50%);
      transform-origin: 50% 50%;
    }
    
    .mobile-btn:active::after {
      animation: ripple 0.6s ease-out;
    }
    
    @keyframes ripple {
      0% {
        transform: scale(0, 0);
        opacity: 1;
      }
      20% {
        transform: scale(25, 25);
        opacity: 1;
      }
      100% {
        opacity: 0;
        transform: scale(40, 40);
      }
    }
    
    .mobile-btn:active {
      transform: scale(0.95);
    }
    
    .mobile-btn-left {
      margin-right: auto;
    }
    
    .mobile-btn-right {
      margin-left: auto;
    }
    
    .mobile-btn-jump {
      background-color: rgba(247, 37, 133, 0.8);
    }
    
    .pause-menu {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 50;
      display: none;
    }
    
    .pause-menu.active {
      display: flex;
    }
    
    .pause-content {
      background-color: white;
      padding: 2rem;
      border-radius: 15px;
      text-align: center;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    
    .pause-menu h2 {
      color: var(--primary-color);
      margin-bottom: 1rem;
    }
    
    .pause-menu p {
      margin-bottom: 1.5rem;
    }
    
    .particle {
      position: absolute;
      background-color: var(--fun-color);
      border-radius: 50%;
      pointer-events: none;
      z-index: 5;
    }
    
    .start-modal {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.8);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 100;
    }
    
    .start-content {
      background-color: white;
      padding: 2rem;
      border-radius: 15px;
      text-align: center;
      max-width: 500px;
      width: 90%;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      animation: modalAppear 0.5s;
    }
    
    @keyframes modalAppear {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    
    .start-modal h2 {
      color: var(--primary-color);
      margin-bottom: 1rem;
      font-size: 1.8rem;
    }
    
    .start-modal p {
      margin-bottom: 1.5rem;
      font-size: 1rem;
    }
    
    .start-btn {
      background-color: var(--accent-color);
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 30px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 1rem;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      margin-top: 1rem;
    }
    
    .start-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(247, 37, 133, 0.4);
    }
    
    .game-over-modal {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.8);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 100;
      display: none;
    }
    
    .game-over-modal.active {
      display: flex;
    }
    
    .game-over-content {
      background-color: white;
      padding: 2rem;
      border-radius: 15px;
      text-align: center;
      max-width: 500px;
      width: 90%;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      animation: modalAppear 0.5s;
    }
    
    .game-over-modal h2 {
      color: var(--primary-color);
      margin-bottom: 1rem;
      font-size: 1.8rem;
    }
    
    .game-over-modal .result-message {
      font-size: 1.2rem;
      margin-bottom: 1.5rem;
      color: var(--text-color);
    }
    
    .game-over-modal .score-display {
      font-size: 1.3rem;
      margin: 1rem 0;
    }
    
    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: var(--accent-color);
      opacity: 0;
      z-index: 40;
    }
    
    @media (max-width: 768px) {
      .game-wrapper {
        height: 60vh;
      }
      
      .player {
        width: 40px;
        height: 56px;
      }
      
      .mobile-controls {
        display: flex;
      }
      
      .header-container {
        padding: 0 15px;
      }
      
      .logo-container img {
        height: 40px;
      }
      
      .logo-container h1 {
        font-size: 1.5rem;
      }
      
      nav a {
        padding: 5px 10px;
        font-size: 0.8rem;
      }
      
      .instructions {
        padding: 1rem;
      }
    }
    
    @media (max-width: 480px) {
      .game-wrapper {
        height: 50vh;
      }
      
      .score-display {
        flex-direction: column;
        gap: 5px;
      }
      
      .game-controls {
        gap: 10px;
      }
      
      .control-btn {
        padding: 8px 15px;
        font-size: 0.8rem;
      }
    }
  </style>
</head>
<body>
  <!-- Audio para los efectos de sonido -->
  <audio id="navSound" src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3"></audio>
  <audio id="jumpSound" src="https://assets.mixkit.co/sfx/preview/mixkit-quick-jump-arcade-game-239.mp3"></audio>
  <audio id="matchSound" src="https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3"></audio>
  <audio id="blockSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3"></audio>
  <audio id="gameOverSound" src="https://assets.mixkit.co/sfx/preview/mixkit-retro-arcade-lose-2027.mp3"></audio>
  <audio id="victorySound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3"></audio>
  <audio id="backgroundMusic" loop src="https://assets.mixkit.co/music/preview/mixkit-game-show-suspense-waiting-668.mp3"></audio>
  
  <!-- Encabezado -->
  <header>
    <div class="header-container">
      <div class="logo-container">
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ffffff'><path d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z'/></svg>" alt="English Jump Logo">
        <h1>English Jump</h1>
      </div>
      <nav>
        <ul>
          <li><a href="#" onclick="playNavSound()">Inicio</a></li>
          <li><a href="#" onclick="playNavSound()">Cursos</a></li>
          <li><a href="#" onclick="playNavSound()">Juegos</a></li>
          <li><a href="#" onclick="playNavSound()">Videos</a></li>
          <li><a href="#" onclick="playNavSound()">Contacto</a></li>
        </ul>
      </nav>
    </div>
  </header>
  <!-- Contenido principal -->
  <main class="container">
    <h1>English Jump Adventure</h1>
    <p>Salta y descubre palabras en ingl√©s para aprender jugando</p>
    
    <div class="instructions">
      <h3>¬øC√≥mo jugar?</h3>
      <p>1. Usa las teclas ‚óÑ ‚ñ∫ para moverte y ‚ñ≤ para saltar (o los botones en m√≥vil)</p>
      <p>2. Golpea los bloques amarillos con "?" para revelar palabras</p>
      <p>3. Encuentra y haz clic en las parejas de palabras (ingl√©s-espa√±ol)</p>
      <p>4. Evita los enemigos rojos que te quitan puntos</p>
      <p>5. ¬°Consigue 10 parejas antes de que se acabe el tiempo!</p>
    </div>
    
    <div class="game-controls">
      <button class="control-btn" id="startBtn" onclick="startGame()">Comenzar Juego</button>
      <button class="control-btn secondary" onclick="resetGame()">Reiniciar</button>
      <button class="control-btn secondary" id="pauseBtn" onclick="togglePause()">Pausa</button>
      <button class="control-btn secondary" onclick="toggleSound()" id="soundBtn">Sonido: ON</button>
    </div>
    
    <div class="score-display">
      <div class="score-item">
        <span class="score-icon">‚≠ê</span>
        <span id="score">0</span>
      </div>
      <div class="score-item">
        <span class="score-icon">üî§</span>
        <span id="pairs">0/10</span>
      </div>
      <div class="score-item">
        <span class="score-icon">‚è±Ô∏è</span>
        <span id="time">120s</span>
      </div>
      <div class="score-item">
        <span class="score-icon">üíñ</span>
        <span id="lives">3</span>
      </div>
    </div>
    
    <!-- √Årea del juego -->
    <div class="game-wrapper">
      <div class="game-container">
        <div class="game-world" id="gameWorld">
          <div id="player" class="player"></div>
        </div>
        
        <!-- Men√∫ de pausa -->
        <div class="pause-menu" id="pauseMenu">
          <div class="pause-content">
            <h2>Juego en Pausa</h2>
            <p>¬øListo para continuar tu aventura en ingl√©s?</p>
            <button class="control-btn" onclick="togglePause()">Continuar</button>
            <button class="control-btn secondary" onclick="resetGame()">Reiniciar</button>
          </div>
        </div>
        
        <!-- Modal de inicio -->
        <div class="start-modal" id="startModal">
          <div class="start-content">
            <h2>¬°Bienvenido a English Jump!</h2>
            <p>Aprende ingl√©s saltando entre plataformas y descubriendo palabras. Empareja las palabras en ingl√©s con su traducci√≥n al espa√±ol para ganar puntos.</p>
            <p>¬°Tienes 2 minutos para encontrar 10 parejas!</p>
            <button class="start-btn" onclick="startGameFromModal()">¬°Comenzar Aventura!</button>
          </div>
        </div>
        
        <!-- Modal de fin de juego -->
        <div class="game-over-modal" id="gameOverModal">
          <div class="game-over-content">
            <h2 id="gameOverTitle">¬°Juego Terminado!</h2>
            <p class="result-message" id="resultMessage"></p>
            <div class="score-display">
              <div class="score-item">
                <span class="score-icon">‚≠ê</span>
                <span id="finalScore">0</span>
              </div>
              <div class="score-item">
                <span class="score-icon">üî§</span>
                <span id="finalPairs">0/10</span>
              </div>
            </div>
            <button class="control-btn" onclick="resetGame()">Jugar de Nuevo</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Controles t√°ctiles para m√≥viles -->
    <div class="mobile-controls">
      <button class="mobile-btn mobile-btn-left" id="leftBtn">‚óÑ</button>
      <button class="mobile-btn mobile-btn-jump" id="jumpBtn">‚ñ≤</button>
      <button class="mobile-btn mobile-btn-right" id="rightBtn">‚ñ∫</button>
    </div>
  </main>

  <!-- Pie de p√°gina -->
  <footer>
    <div class="footer-content">
      <div class="footer-logo">
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%234361ee'><path d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z'/></svg>" alt="English Jump Logo">
        <h2>English Jump</h2>
      </div>
      <p>Aprende ingl√©s de la forma m√°s divertida</p>
      <div class="social-links">
        <a href="#" onclick="playNavSound()"><span>Instagram</span></a>
        <a href="#" onclick="playNavSound()"><span>Twitter</span></a>
        <a href="#" onclick="playNavSound()"><span>YouTube</span></a>
        <a href="#" onclick="playNavSound()"><span>TikTok</span></a>
      </div>
    </div>
  </footer>

  <script>
    // Variables del juego
    let player;
    let platforms = [];
    let blocks = [];
    let enemies = [];
    let wordBubbles = [];
    let selectedBubble = null;
    let score = 0;
    let pairsMatched = 0;
    let lives = 3;
    let gameStarted = false;
    let gameInterval;
    let enemyInterval;
    let timeLeft = 120;
    let moveInterval;
    let cameraOffset = 0;
    let isJumping = false;
    let isPaused = false;
    let soundEnabled = true;
    const gameWorld = document.getElementById('gameWorld');
    const gameContainer = document.querySelector('.game-container');
    const playerElem = document.getElementById('player');
    
    // Emojis para los bloques
    const blockEmojis = ["üìö", "üéì", "‚úèÔ∏è", "üìù", "üî§", "üåé", "üó£Ô∏è", "üè´", "üë®‚Äçüè´", "üë©‚Äçüè´"];
    
    // Pares de palabras/frases en ingl√©s-espa√±ol
    const wordPairs = [
      { english: "Hello", spanish: "Hola" },
      { english: "Goodbye", spanish: "Adi√≥s" },
      { english: "Thank you", spanish: "Gracias" },
      { english: "Please", spanish: "Por favor" },
      { english: "I love you", spanish: "Te quiero" },
      { english: "How are you?", spanish: "¬øC√≥mo est√°s?" },
      { english: "My name is", spanish: "Mi nombre es" },
      { english: "Good morning", spanish: "Buenos d√≠as" },
      { english: "Good night", spanish: "Buenas noches" },
      { english: "What time is it?", spanish: "¬øQu√© hora es?" },
      { english: "Water", spanish: "Agua" },
      { english: "Food", spanish: "Comida" },
      { english: "House", spanish: "Casa" },
      { english: "Dog", spanish: "Perro" },
      { english: "Cat", spanish: "Gato" },
      { english: "Book", spanish: "Libro" },
      { english: "School", spanish: "Escuela" },
      { english: "Friend", spanish: "Amigo" },
      { english: "Family", spanish: "Familia" },
      { english: "City", spanish: "Ciudad" }
    ];
    
    // Inicializar el juego al cargar la p√°gina
    window.onload = function() {
      initGameElements();
      showStartModal();
    };
    
    // Mostrar modal de inicio
    function showStartModal() {
      document.getElementById('startModal').style.display = 'flex';
    }
    
    // Ocultar modal de inicio
    function hideStartModal() {
      playSound('navSound');
      document.getElementById('startModal').style.display = 'none';
    }
    
    // Funci√≥n para iniciar desde el modal
    function startGameFromModal() {
      hideStartModal();
      startGame();
    }
    
    // Funci√≥n para reproducir sonidos
    function playSound(soundId) {
      if (!soundEnabled) return;
      
      const sound = document.getElementById(soundId);
      if (sound) {
        sound.currentTime = 0;
        sound.play().catch(e => console.log("Error al reproducir sonido:", e));
      }
    }
    
    // Alternar sonido
    function toggleSound() {
      soundEnabled = !soundEnabled;
      document.getElementById('soundBtn').textContent = `Sonido: ${soundEnabled ? 'ON' : 'OFF'}`;
      
      const bgMusic = document.getElementById('backgroundMusic');
      if (soundEnabled && gameStarted && !isPaused) {
        bgMusic.play().catch(e => console.log("Error al reproducir m√∫sica:", e));
      } else {
        bgMusic.pause();
      }
    }
    
    // Alternar pausa
    function togglePause() {
      if (!gameStarted) return;
      
      isPaused = !isPaused;
      
      if (isPaused) {
        document.getElementById('pauseMenu').classList.add('active');
        clearInterval(gameInterval);
        clearInterval(enemyInterval);
        document.getElementById('backgroundMusic').pause();
        document.getElementById('pauseBtn').textContent = 'Continuar';
      } else {
        document.getElementById('pauseMenu').classList.remove('active');
        startGameTimers();
        if (soundEnabled) {
          document.getElementById('backgroundMusic').play().catch(e => console.log(e));
        } document.getElementById('pauseBtn').textContent = 'Pausa';
      }
    }
    
    // Funci√≥n para inicializar los elementos del juego
    function initGameElements() {
      // Crear jugador
      player = {
        element: playerElem,
        x: 100,
        y: 100,
        speedX: 0,
        speedY: 0,
        isJumping: false,
        direction: 1 // 1 para derecha, -1 para izquierda
      };
      
      playerElem.style.left = player.x + 'px';
      playerElem.style.bottom = player.y + 'px';
      
      // Crear plataformas
      createPlatforms();
      
      // Crear bloques con palabras
      createBlocks();
      
      // Crear enemigos
      createEnemies();
      
      // Configurar controles t√°ctiles
      setupTouchControls();
      
      // Event listeners para teclado
      document.addEventListener('keydown', handleKeyDown);
      document.addEventListener('keyup', handleKeyUp);
      
      // Inicializar c√°mara
      updateCamera();
    }
    
    // Configurar controles t√°ctiles
    function setupTouchControls() {
      const leftBtn = document.getElementById('leftBtn');
      const rightBtn = document.getElementById('rightBtn');
      const jumpBtn = document.getElementById('jumpBtn');
      
      // Controles para m√≥vil
      leftBtn.addEventListener('touchstart', () => { player.speedX = -5; player.direction = -1; });
      leftBtn.addEventListener('touchend', () => { if (player.speedX < 0) player.speedX = 0; });
      leftBtn.addEventListener('mousedown', () => { player.speedX = -5; player.direction = -1; });
      leftBtn.addEventListener('mouseup', () => { if (player.speedX < 0) player.speedX = 0; });
      leftBtn.addEventListener('mouseleave', () => { if (player.speedX < 0) player.speedX = 0; });
      
      rightBtn.addEventListener('touchstart', () => { player.speedX = 5; player.direction = 1; });
      rightBtn.addEventListener('touchend', () => { if (player.speedX > 0) player.speedX = 0; });
      rightBtn.addEventListener('mousedown', () => { player.speedX = 5; player.direction = 1; });
      rightBtn.addEventListener('mouseup', () => { if (player.speedX > 0) player.speedX = 0; });
      rightBtn.addEventListener('mouseleave', () => { if (player.speedX > 0) player.speedX = 0; });
      
      jumpBtn.addEventListener('click', handleJump);
    }
    
    // Crear plataformas
    function createPlatforms() {
      // Limpiar plataformas existentes
      platforms.forEach(platform => platform.element.remove());
      platforms = [];
      
      // Plataforma principal grande
      createPlatform(0, 50, 1000, 20, 'grass');
      
      // Plataformas flotantes
      createPlatform(200, 150, 200, 15);
      createPlatform(500, 200, 150, 15);
      createPlatform(800, 250, 200, 15);
      createPlatform(1200, 150, 200, 15, 'ice');
      createPlatform(1500, 200, 150, 15);
      createPlatform(1800, 250, 200, 15);
      createPlatform(2200, 180, 250, 15, 'grass');
      createPlatform(2600, 220, 200, 15);
      createPlatform(3000, 150, 300, 20, 'grass');
      createPlatform(3500, 250, 200, 15);
    }
    
    function createPlatform(x, y, width, height, type = '') {
      const platform = document.createElement('div');
      platform.className = `platform ${type}`;
      platform.style.width = width + 'px';
      platform.style.height = height + 'px';
      platform.style.left = x + 'px';
      platform.style.bottom = y + 'px';
      
      // A√±adir plataforma al mundo del juego
      gameWorld.appendChild(platform);
      
      // Guardar informaci√≥n de la plataforma
      platforms.push({
        element: platform,
        x: x,
        y: y,
        width: width,
        height: height,
        type: type
      });
    }
    
    // Crear bloques con palabras
    function createBlocks() {
      // Limpiar bloques existentes
      blocks.forEach(block => block.element.remove());
      blocks = [];
      wordBubbles.forEach(bubble => bubble.element.remove());
      wordBubbles = [];
      
      // Seleccionar 10 pares aleatorios
      const shuffledPairs = [...wordPairs]
        .sort(() => Math.random() - 0.5)
        .slice(0, 10);
      
      // Crear bloques con palabras en ingl√©s
      shuffledPairs.forEach((pair, index) => {
        createBlock(300 + index * 200, 300, pair.english, index, 'english');
        createBlock(600 + index * 200, 300, pair.spanish, index, 'spanish');
      });
      
      // Crear algunos bloques adicionales sin palabras
      for (let i = 0; i < 5; i++) {
        createBlock(400 + i * 350, 250, '', -1, 'empty');
      }
    }
    
    function createBlock(x, y, word, pairId, language) {
      // Crear bloque
      const block = document.createElement('div');
      block.className = 'block question';
      block.style.left = x + 'px';
      block.style.bottom = y + 'px';
      
      // Si es un bloque vac√≠o (decoraci√≥n)
      if (language === 'empty') {
        block.textContent = '‚≠ê';
        block.className = 'block';
        block.style.backgroundColor = '#f8f9fa';
        block.style.borderColor = '#adb5bd';
        gameWorld.appendChild(block);
        blocks.push({
          element: block,
          x: x,
          y: y,
          width: 50,
          height: 50,
          hasWord: false
        });
        return;
      }
      
      // Configurar bloque con palabra
      block.dataset.word = word;
      block.dataset.pairId = pairId;
      block.dataset.language = language;
      block.onclick = () => hitBlock(block);
      
      // A√±adir bloque al mundo del juego
      gameWorld.appendChild(block);
      
      // Guardar informaci√≥n del bloque
      blocks.push({
        element: block,
        x: x,
        y: y,
        width: 50,
        height: 50,
        word: word,
        pairId: pairId,
        language: language,
        revealed: false,
        hasWord: true
      });
      
      // Crear burbuja de palabra (inicialmente oculta)
      const bubble = document.createElement('div');
      bubble.className = `word-bubble ${language}`;
      bubble.textContent = word;
      bubble.dataset.pairId = pairId;
      bubble.dataset.language = language;
      bubble.style.left = (x - 15) + 'px';
      bubble.style.bottom = (y + 60) + 'px';
      bubble.onclick = () => selectWordBubble(bubble);
      
      // A√±adir burbuja al mundo del juego
      gameWorld.appendChild(bubble);
      
      // Guardar informaci√≥n de la burbuja
      wordBubbles.push({
        element: bubble,
        x: x - 15,
        y: y + 60,
        width: bubble.offsetWidth,
        height: bubble.offsetHeight,
        word: word,
        pairId: pairId,
        language: language,
        visible: false
      });
    }
    
    // Crear enemigos
    function createEnemies() {
      // Limpiar enemigos existentes
      enemies.forEach(enemy => enemy.element.remove());
      enemies = [];
      
      // Crear varios enemigos en posiciones aleatorias
      for (let i = 0; i < 8; i++) {
        const x = 400 + Math.random() * 3000;
        const y = 100 + Math.random() * 200;
        
        const enemy = document.createElement('div');
        enemy.className = 'enemy';
        enemy.style.left = x + 'px';
        enemy.style.bottom = y + 'px';
        
        gameWorld.appendChild(enemy);
        
        enemies.push({
          element: enemy,
          x: x,
          y: y,
          width: 40,
          height: 40,
          speed: 1 + Math.random() * 2,
          direction: Math.random() > 0.5 ? 1 : -1
        });
      }
    }
    
    // Golpear bloque
    function hitBlock(blockElement) {
      if (!gameStarted || isPaused) return;
      
      const block = blocks.find(b => b.element === blockElement);
      if (!block || !block.hasWord || block.revealed) return;
      
      playSound('blockSound');
      blockElement.classList.add('hit');
      block.revealed = true;
      
      // Mostrar la palabra correspondiente
      const bubble = wordBubbles.find(b => 
        b.pairId === block.pairId && b.language === block.language
      );
      
      if (bubble) {
        bubble.element.classList.add('show');
        bubble.visible = true;
      }
      
      // Crear efecto de part√≠culas
      createParticles(block.x + 25, block.y + 25, 5, '#f5cb5c');
      
      // Eliminar la animaci√≥n despu√©s de que termine
      setTimeout(() => {
        blockElement.classList.remove('hit');
      }, 300);
    }
    
    // Seleccionar burbuja de palabra
    function selectWordBubble(bubbleElement) {
      if (!gameStarted || isPaused) return;
      
      const bubble = wordBubbles.find(b => b.element === bubbleElement);
      if (!bubble || !bubble.visible) return;
      
      if (!selectedBubble) {
        // Primera selecci√≥n
        selectedBubble = bubble;
        bubble.element.style.backgroundColor = 'var(--fun-color)';
        bubble.element.style.color = 'white';
      } else {
        // Segunda selecci√≥n (intento de emparejar)
        if (selectedBubble.pairId === bubble.pairId && 
            selectedBubble.language !== bubble.language) {
          // Emparejamiento correcto
          selectedBubble.element.classList.add('matched');
          bubble.element.classList.add('matched');
          playSound('matchSound');
          
          // Aumentar puntuaci√≥n
          score += 10;
          pairsMatched++;
          updateScore();
          
          // Crear efecto de confeti
          createConfetti(bubble.x + bubble.width/2, bubble.y + bubble.height/2);
          
          // Verificar si gan√≥
          if (pairsMatched >= 10) {
            endGame(true);
          }
        } else {
          // Emparejamiento incorrecto
          playSound('navSound');
          score = Math.max(0, score - 2);
          updateScore();
        }
        
        // Resetear selecci√≥n
        selectedBubble.element.style.backgroundColor = '';
        selectedBubble.element.style.color = '';
        selectedBubble = null;
      }
    }
    
    // Mover jugador con teclado
    function handleKeyDown(e) {
      if (!gameStarted || isPaused) return;
      
      switch(e.key) {
        case 'ArrowLeft':
          player.speedX = -5;
          player.direction = -1;
          break;
        case 'ArrowRight':
          player.speedX = 5;
          player.direction = 1;
          break;
        case 'ArrowUp':
        case ' ':
          handleJump();
          break;
        case 'Escape':
          togglePause();
          break;
      }
    }
    
    function handleKeyUp(e) {
      switch(e.key) {
        case 'ArrowLeft':
          if (player.speedX < 0) player.speedX = 0;
          break;
        case 'ArrowRight':
          if (player.speedX > 0) player.speedX = 0;
          break;
      }
    }
    
    // Manejar salto
    function handleJump() {
      if (!gameStarted || isPaused || player.isJumping) return;
      
      const playerBottom = parseInt(playerElem.style.bottom || '100');
      if (playerBottom <= 100) { // Solo puede saltar si est√° en el suelo
        playSound('jumpSound');
        player.isJumping = true;
        player.speedY = 12;
        playerElem.classList.add('jumping');
        
        setTimeout(() => {
          playerElem.classList.remove('jumping');
        }, 500);
      }
    }
    
    // Actualizar c√°mara para seguir al jugador
    function updateCamera() {
      const containerWidth = gameContainer.offsetWidth;
      
      // Centrar la c√°mara en el jugador, pero no mostrar √°rea fuera del mundo
      cameraOffset = Math.max(0, player.x - containerWidth / 2);
      cameraOffset = Math.min(cameraOffset, 4000 - containerWidth);
      
      gameWorld.style.transform = `translateX(${-cameraOffset}px)`;
    }
    
    // Actualizar estado del juego
    function updateGame() {
      if (isPaused) return;
      
      // Aplicar gravedad
      player.speedY -= 0.5;
      
      // Actualizar posici√≥n del jugador
      player.x += player.speedX;
      player.y += player.speedY;
      
      // Limitar posici√≥n horizontal
      player.x = Math.max(0, Math.min(player.x, 4000 - 50));
      
      // Detecci√≥n de colisi√≥n con plataformas
      let onGround = false;
      const playerWidth = 50;
      const playerHeight = 70;
      
      platforms.forEach(platform => {
        // Verificar colisi√≥n con la plataforma
        if (player.x < platform.x + platform.width &&
            player.x + playerWidth > platform.x &&
            player.y < platform.y + platform.height &&
            player.y + playerHeight > platform.y) {
          
          // Colisi√≥n desde arriba (aterrizando en la plataforma)
          if (player.speedY < 0 && player.y + playerHeight > platform.y + platform.height/2) {
            player.y = platform.y + platform.height;
            player.speedY = 0;
            player.isJumping = false;
            onGround = true;
          }
          // Colisi√≥n desde abajo (golpeando cabeza)
          else if (player.speedY > 0 && player.y < platform.y + platform.height/2) {
            player.y = platform.y - playerHeight;
            player.speedY = 0;
          }
          // Colisi√≥n desde la izquierda
          else if (player.speedX > 0 && player.x < platform.x + platform.width/2) {
            player.x = platform.x - playerWidth;
            player.speedX = 0;
          }
          // Colisi√≥n desde la derecha
          else if (player.speedX < 0 && player.x > platform.x + platform.width/2) {
            player.x = platform.x + platform.width;
            player.speedX = 0;
          }
        }
      });
      
      // Si no est√° en una plataforma, est√° cayendo
      if (player.y <= 100) {
        player.y = 100;
        player.speedY = 0;
        player.isJumping = false;
        onGround = true;
      }
      
      // Actualizar posici√≥n visual del jugador
      playerElem.style.left = player.x + 'px';
      playerElem.style.bottom = player.y + 'px';
      
      // Actualizar direcci√≥n del jugador
      if (player.speedX > 0) {
        playerElem.style.transform = 'scaleX(1)';
      } else if (player.speedX < 0) {
        playerElem.style.transform = 'scaleX(-1)';
      }
      
      // Actualizar c√°mara
      updateCamera();
      
      // Verificar colisi√≥n con enemigos
      enemies.forEach(enemy => {
        if (Math.abs(player.x - enemy.x) < 45 && 
            Math.abs(player.y - enemy.y) < 60) {
          // Golpear enemigo desde arriba
          if (player.speedY < 0 && player.y + playerHeight > enemy.y + enemy.height/2) {
            // Eliminar enemigo
            enemy.element.remove();
            enemies = enemies.filter(e => e !== enemy);
            playSound('blockSound');
            score += 5;
            updateScore();
            createParticles(enemy.x + 20, enemy.y + 20, 10, '#ef233c');
          } else {
            // Perder vida por contacto con enemigo
            if (!player.invulnerable) {
              loseLife();
            }
          }
        }
      });
    } 
    // Mover enemigos
    function moveEnemies() {
      if (isPaused) return;
      
      enemies.forEach(enemy => {
        // Mover enemigo
        enemy.x += enemy.speed * enemy.direction;
        
        // Cambiar direcci√≥n si choca con plataforma o l√≠mite
        let shouldTurn = false;
        
        // Verificar si est√° en una plataforma
        let onPlatform = platforms.some(platform => {
          return enemy.x > platform.x && enemy.x < platform.x + platform.width &&
                 Math.abs(enemy.y - platform.y) < 5;
        });
        
        if (!onPlatform || enemy.x < 0 || enemy.x > 4000 - enemy.width) {
          shouldTurn = true;
        }
        
        // Verificar colisi√≥n con otras plataformas
        platforms.forEach(platform => {
          if (enemy.x < platform.x + platform.width &&
              enemy.x + enemy.width > platform.x &&
              enemy.y < platform.y + platform.height &&
              enemy.y + enemy.height > platform.y) {
            
            if (enemy.direction > 0) {
              enemy.x = platform.x - enemy.width;
            } else {
              enemy.x = platform.x + platform.width;
            }
            shouldTurn = true;
          }
        });
        
        if (shouldTurn) {
          enemy.direction *= -1;
        }
        
        // Actualizar posici√≥n visual
        enemy.element.style.left = enemy.x + 'px';
      });
    }
    
    // Perder vida
    function loseLife() {
      lives--;
      updateScore();
      
      // Hacer al jugador invulnerable temporalmente
      player.invulnerable = true;
      playerElem.style.opacity = '0.5';
      
      // Efecto visual
      createParticles(player.x + 25, player.y + 35, 10, '#ef233c');
      
      setTimeout(() => {
        player.invulnerable = false;
        playerElem.style.opacity = '1';
      }, 2000);
      
      if (lives <= 0) {
        endGame(false);
      }
    }
    
    // Actualizar puntuaci√≥n
    function updateScore() {
      document.getElementById('score').textContent = score;
      document.getElementById('pairs').textContent = `${pairsMatched}/10`;
      document.getElementById('lives').textContent = lives;
    }
    
    // Actualizar tiempo
    function updateTimeDisplay() {
      document.getElementById('time').textContent = `${timeLeft}s`;
    }
    
    // Iniciar juego
    function startGame() {
      if (gameStarted) return;
      
      playSound('navSound');
      gameStarted = true;
      score = 0;
      pairsMatched = 0;
      lives = 3;
      timeLeft = 120;
      updateScore();
      updateTimeDisplay();
      
      // Ocultar todas las burbujas al inicio
      wordBubbles.forEach(bubble => {
        bubble.element.classList.remove('show');
        bubble.visible = false;
      });
      
      // Restablecer bloques
      blocks.forEach(block => {
        if (block.hasWord) {
          block.revealed = false;
          block.element.classList.remove('hit');
        }
      });
      
      // Reproducir m√∫sica de fondo
      if (soundEnabled) {
        document.getElementById('backgroundMusic').play().catch(e => console.log(e));
      }
      
      // Iniciar temporizadores del juego
      startGameTimers();
      
      // Actualizar botones
      document.getElementById('startBtn').textContent = 'Jugando...';
      document.getElementById('startBtn').disabled = true;
    }
    
    // Iniciar temporizadores del juego
    function startGameTimers() {
      // Temporizador principal del juego
      gameInterval = setInterval(updateGame, 1000/60); // 60 FPS
      
      // Temporizador para mover enemigos
      enemyInterval = setInterval(moveEnemies, 1000/30); // 30 FPS
      
      // Temporizador del juego
      timeLeft = 120;
      updateTimeDisplay();
      
      const timerInterval = setInterval(() => {
        if (!isPaused) {
          timeLeft--;
          updateTimeDisplay();
          
          if (timeLeft <= 0) {
            clearInterval(timerInterval);
            endGame(false);
          }
        }
      }, 1000);
    }
    
    // Terminar juego
    function endGame(win) {
      clearInterval(gameInterval);
      clearInterval(enemyInterval);
      gameStarted = false;
      
      // Detener m√∫sica de fondo
      document.getElementById('backgroundMusic').pause();
      
      // Mostrar mensaje de resultado
      const gameOverModal = document.getElementById('gameOverModal');
      const gameOverTitle = document.getElementById('gameOverTitle');
      const resultMessage = document.getElementById('resultMessage');
      const finalScore = document.getElementById('finalScore');
      const finalPairs = document.getElementById('finalPairs');
      
      finalScore.textContent = score;
      finalPairs.textContent = `${pairsMatched}/10`;
      
      if (win) {
        playSound('victorySound');
        gameOverTitle.textContent = '¬°Felicidades!';
        resultMessage.textContent = '¬°Has encontrado todas las parejas!';
        createConfetti(gameContainer.offsetWidth/2, gameContainer.offsetHeight/2, 100);
      } else {
        playSound('gameOverSound');
        gameOverTitle.textContent = '¬°Juego Terminado!';
        resultMessage.textContent = timeLeft <= 0 ? '¬°Se acab√≥ el tiempo!' : '¬°Int√©ntalo de nuevo!';
      }
      
      gameOverModal.classList.add('active');
      
      // Actualizar botones
      document.getElementById('startBtn').textContent = 'Jugar de Nuevo';
      document.getElementById('startBtn').disabled = false;
    }
    
    // Reiniciar juego
    function resetGame() {
      playSound('navSound');
      
      // Ocultar modales
      document.getElementById('gameOverModal').classList.remove('active');
      document.getElementById('pauseMenu').classList.remove('active');
      isPaused = false;
      
      // Detener todos los intervalos
      clearInterval(gameInterval);
      clearInterval(enemyInterval);
      
      // Restablecer jugador
      player = {
        element: playerElem,
        x: 100,
        y: 100,
        speedX: 0,
        speedY: 0,
        isJumping: false,
        direction: 1
      };
      
      playerElem.style.left = player.x + 'px';
      playerElem.style.bottom = player.y + 'px';
      playerElem.style.opacity = '1';
      playerElem.style.transform = 'scaleX(1)';
      
      // Limpiar elementos del juego
      platforms.forEach(platform => platform.element.remove());
      blocks.forEach(block => block.element.remove());
      enemies.forEach(enemy => enemy.element.remove());
      wordBubbles.forEach(bubble => bubble.element.remove());
      
      // Reinicializar elementos
      initGameElements();
      
      // Restablecer puntuaci√≥n
      score = 0;
      pairsMatched = 0;
      lives = 3;
      updateScore();
      updateTimeDisplay();
      
      // Detener m√∫sica de fondo
      document.getElementById('backgroundMusic').pause();
      
      // Actualizar botones
      document.getElementById('startBtn').textContent = 'Comenzar Juego';
      document.getElementById('pauseBtn').textContent = 'Pausa';
    }
    
    // Crear efecto de part√≠culas
    function createParticles(x, y, count, color) {
      for (let i = 0; i < count; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.width = Math.random() * 8 + 4 + 'px';
        particle.style.height = particle.style.width;
        particle.style.backgroundColor = color;
        particle.style.left = x + 'px';
        particle.style.bottom = y + 'px';
        
        gameWorld.appendChild(particle);
        
        const angle = Math.random() * Math.PI * 2;
        const speed = 1 + Math.random() * 3;
        const lifetime = 500 + Math.random() * 500;
        
        const startTime = Date.now();
        
        const animateParticle = () => {
          const elapsed = Date.now() - startTime;
          const progress = elapsed / lifetime;
          
          if (progress >= 1) {
            particle.remove();
            return;
          }
          
          const currentX = x + Math.cos(angle) * speed * elapsed * 0.05;
          const currentY = y + Math.sin(angle) * speed * elapsed * 0.05 - (elapsed * 0.001 * elapsed * 0.001);
          
          particle.style.left = currentX + 'px';
          particle.style.bottom = currentY + 'px';
          particle.style.opacity = 1 - progress;
          
          requestAnimationFrame(animateParticle);
        };
        
        requestAnimationFrame(animateParticle);
      }
    }
    
    // Crear efecto de confeti
    function createConfetti(x, y, count = 30) {
      const colors = ['#f72585', '#4cc9f0', '#4361ee', '#3a0ca3', '#4ade80', '#f5cb5c'];
      
      for (let i = 0; i < count; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.width = Math.random() * 10 + 5 + 'px';
        confetti.style.height = Math.random() * 10 + 5 + 'px';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.left = x + 'px';
        confetti.style.bottom = y + 'px';
        confetti.style.opacity = '1';
        confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
        
        gameContainer.appendChild(confetti);
        
        const angle = Math.random() * Math.PI * 2;
        const speed = 2 + Math.random() * 3;
        const lifetime = 1000 + Math.random() * 1000;
        
        const startTime = Date.now();
        
        const animateConfetti = () => {
          const elapsed = Date.now() - startTime;
          const progress = elapsed / lifetime;
          
          if (progress >= 1) {
            confetti.remove();
            return;
          }
          
          const currentX = x + Math.cos(angle) * speed * elapsed * 0.1;
          const currentY = y + Math.sin(angle) * speed * elapsed * 0.1 - (elapsed * 0.001 * elapsed * 0.001);
          
          confetti.style.left = currentX + 'px';
          confetti.style.bottom = currentY + 'px';
          confetti.style.opacity = 1 - progress;
          confetti.style.transform = `rotate(${progress * 360 * 2}deg)`;
          
          requestAnimationFrame(animateConfetti);
        };
        
        requestAnimationFrame(animateConfetti);
      }
    }
  </script>
</body>
</html>